{% form_theme form 'OpensoftCodeConversationBundle:Form:fields.html.twig' %}

<form action="{{ path('fos_user_profile_edit') }}" {{ form_enctype(form) }} method="POST" class="fos_user_profile_edit">
    <fieldset>
        <legend>Profile</legend>
        {{ form_errors(form) }}
        
        {#{{ form_widget(form.user) }}#}

        <div class="clearfix">
            {{ form_label(form.user.username)}}
            <div class="input">{{ form_widget(form.user.username) }}</div>
        </div>

        <div class="clearfix">
            {{ form_label(form.user.email)}}
            <div class="input">{{ form_widget(form.user.email) }}</div>
        </div>

        <div class="clearfix">
            {{ form_label(form.user.gitAlias)}}
            <div class="input">
                {{ form_widget(form.user.gitAlias) }}
                <span class="help-block">The git author name to map to</span>
            </div>
        </div>

        <div class="clearfix">
            <label for="fos_user_profile_form_user_gravatar">Avatar
                {% if form.user.gravatar.get('value') %}
                    <img src="{{ gravatar(form.user.gravatar.get('value')) }}" alt="My gravatar image" />
                {% endif %}
            </label>
            <div class="input">
                {{ form_widget(form.user.gravatar) }}
                <span class="help-block">If you have an avatar at <a href="http://gravatar.com">gravatar.com</a>, specify your gravatar email address</span>
            </div>
        </div>

        <div class="clearfix">
            <label for="fos_user_profile_form_current">Current password *</label>
            <div class="input">
                {{ form_widget(form.current) }}
                <span class="help-block">Confirm your password to make changes</span>
            </div>
        </div>

        {{ form_rest(form) }}
        <div class="actions">
            <input class="btn primary" type="submit" value="{{ 'profile.edit.submit'|trans({}, 'FOSUserBundle') }}" />
        </div>
    </fieldset>
</form>
